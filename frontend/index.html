<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartXCrop - Farmer's Marketplace</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Screen -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <h1>🌱 SmartXCrop</h1>
                <p>Connect, Trade, and Grow Together</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm">
                <form onsubmit="event.preventDefault(); login();">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </form>
                <p style="text-align: center; margin-top: 20px;">
                    Don't have an account? 
                    <a href="#" onclick="showSignup()" style="color: var(--primary-green);">Sign up here</a>
                </p>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="hidden">
                <form onsubmit="event.preventDefault(); signup();">
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" class="form-control" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" class="form-control" placeholder="Enter your age" min="18" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="region">Region</label>
                        <input type="text" id="region" class="form-control" placeholder="Enter your region" required>
                    </div>
                    <div class="form-group">
                        <label>User Type</label>
                        <div class="user-type-selector">
                            <div class="user-type-option" onclick="selectUserType(this, 'farmer')">
                                <i class="fas fa-tractor"></i>
                                <div>Farmer</div>
                            </div>
                            <div class="user-type-option" onclick="selectUserType(this, 'buyer')">
                                <i class="fas fa-shopping-cart"></i>
                                <div>Buyer</div>
                            </div>
                            <div class="user-type-option" onclick="selectUserType(this, 'both')">
                                <i class="fas fa-exchange-alt"></i>
                                <div>Both</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signupUsername">Username</label>
                        <input type="text" id="signupUsername" class="form-control" placeholder="Choose a username" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" class="form-control" placeholder="Create a password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
                <p style="text-align: center; margin-top: 20px;">
                    Already have an account? 
                    <a href="#" onclick="showLogin()" style="color: var(--primary-green);">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="appScreen" class="app-screen hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <h1>🌱 SmartXCrop</h1>
                </div>
                <div class="header-actions">
                    <div class="cart-icon" onclick="showCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <div class="cart-badge" style="display: none;">0</div>
                    </div>
                    <div class="profile-mini" onclick="switchTab('profile')">
                        <div id="mainProfileAvatar" class="user-avatar"></div>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('feed')">
                    <i class="fas fa-home"></i> Feed
                </button>
                <button class="tab-button" onclick="switchTab('map')">
                    <i class="fas fa-map-marked-alt"></i> Map
                </button>
                <button class="tab-button" onclick="switchTab('agroInputs')">
                    <i class="fas fa-seedling"></i> Agro Inputs
                </button>
                <button class="tab-button" onclick="switchTab('messages')">
                    <i class="fas fa-comments"></i> Messages
                </button>
                <button class="tab-button" onclick="switchTab('profile')">
                    <i class="fas fa-user"></i> Profile
                </button>
                <button class="tab-button" onclick="openMyFarm()">
                    <i class="fas fa-tractor"></i> My Farm
                </button>
                <button class="tab-button" onclick="openPlantIdentification()">
                    <i class="fas fa-camera"></i> Plant ID
                </button>
                <button class="tab-button" onclick="openDiseaseDetection()">
                    <i class="fas fa-heartbeat"></i> Crop Health
                </button>
            </div>
        </nav>

        <!-- Tab Contents -->
        <main class="tab-content-container">
            <!-- Feed Tab -->
            <div id="feedTab" class="tab-content">
                <div class="feed">
                    <!-- Products will be dynamically loaded here -->
                </div>
            </div>

            <!-- Map Tab -->
            <div id="mapTab" class="tab-content hidden">
                <div class="map-container">
                    <div id="realMap"></div>
                </div>
            </div>

            <!-- Agro Inputs Tab -->
            <div id="agroInputsTab" class="tab-content hidden">
                <!-- Agro inputs will be dynamically loaded here -->
            </div>

            <!-- Messages Tab -->
            <div id="messagesTab" class="tab-content hidden">
                <!-- Messages will be dynamically loaded here -->
            </div>

            <!-- Profile Tab -->
            <div id="profileTab" class="tab-content hidden">
                <div class="profile-section">
                    <div class="profile-header">
                        <div id="profileAvatarLarge" class="profile-avatar-large"></div>
                        <div class="profile-info">
                            <h2 id="profileName">Loading...</h2>
                            <p id="profileDetails">Loading...</p>
                            <p><strong>User Type:</strong> <span id="profileType">Loading...</span></p>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="openEditProfile()">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>

                <div class="profile-section">
                    <div class="section-header">
                        <h3>📊 My Stats</h3>
                    </div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="productsCount">0</span>
                            <span class="stat-label">Products</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="salesCount">0</span>
                            <span class="stat-label">Sales</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="ratingScore">0</span>
                            <span class="stat-label">Rating</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="reviewsCount">0</span>
                            <span class="stat-label">Reviews</span>
                        </div>
                    </div>
                </div>

                <div class="profile-section">
                    <div class="section-header">
                        <h3>🛍️ My Products</h3>
                        <button class="btn btn-primary btn-small" onclick="showAddProductForm()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                    <div class="my-products-grid">
                        <!-- Products will be dynamically loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>